#############
### i3_start ###
#############

# fonts
font pango: FontAwesome 20, Noto Sans Regular 10

# vim-like marks
show_marks yes

#border indicator on windows:
new_window pixel 1

# window title alignment
title_align center

# stop mouse following window focus
focus_follows_mouse no

workspace_layout tabbed

# drag by moving window titlebar
tiling_drag titlebar


############
### i3_end ###
############


##################
### startup_start ###
##################

#get auth work with polkit-gnome
exec --no-startup-id /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1

# set displays
exec --no-startup-id $HOME/.config/i3/scripts/set-displays.sh

# Remap Caps Lock as additional Control
exec_always --no-startup-id "sleep 1; setxkbmap -option ctrl:nocaps"

# enable touchpad tapping 
exec_always --no-startup-id "xinput set-prop 'SYNA8008:00 06CB:CE58 Touchpad' 'libinput Tapping Enabled' 1"
# disable middle button  
exec_always --no-startup-id "xinput set-prop 'SYNA8008:00 06CB:CE58 Touchpad' 'libinput Middle Emulation Enabled' 1"

# rofi bindings to manage clipboard (install greenclip)
exec --no-startup-id greenclip daemon>/dev/null

# polybar
exec_always --no-startup-id $HOME/.config/polybar/launch.sh


#################
### startup_end ###
#################


###################
### variables_start ###
###################

set $mod Mod4
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"	
set $ws6 "6"	
set $ws7 "7" 	
set $ws8 "8"
set $ws9 "9"
set $ws0 "0"
# set default monitors for workspaces
workspace $ws1 output eDP-1 DP-3-3 DP-2-1 HDMI-1
workspace $ws2 output DP-2-1 DP-3-1 HDMI-1 eDP-1  
workspace $ws3 output DP-2-1 DP-3-1 HDMI-1 eDP-1  
workspace $ws4 output DP-2-1 DP-3-1 HDMI-1 eDP-1
workspace $ws5 output DP-2-1 DP-3-1 HDMI-1 eDP-1
workspace $ws6 output DP-2-1 DP-3-1 HDMI-1 eDP-1
workspace $ws7 output DP-2-1 DP-3-1 HDMI-1 eDP-1
workspace $ws8 output DP-2-1 DP-3-1 HDMI-1 eDP-1
workspace $ws9 output DP-2-1 DP-3-1 HDMI-1 eDP-1
workspace $ws0 output DP-2-1 DP-3-1 HDMI-1 eDP-1

set $refresh_i3status killall -SIGUSR1 i3status
set $terminal gnome-terminal

##################
### variables_end ###
##################

#####################
### keybindings_start ###
#####################

# rofi
bindsym $mod+d exec rofi -combi-modi window#drun#ssh -theme solarized -show combi
bindsym Mod1+Tab exec rofi -show window \
		-config ~/.config/rofi/rofidmenu.rasi

# apps
bindsym $mod+Return exec --no-startup-id $terminal
bindsym $mod+b exec --no-startup-id blueberry

# windows
# kill focused window
bindsym $mod+q kill

bindsym $mod+Shift+s floating enable; resize set 75ppt 90ppt; move position center
bindsym $mod+Shift+f floating enable; resize set 100ppt 100ppt; move position center

bindsym $mod+Mod1+Left move left 5 ppt
bindsym $mod+Mod1+Right move right 5 ppt
bindsym $mod+Mod1+Up move up 5 ppt 
bindsym $mod+Mod1+Down move down 5 ppt

bindsym Control+$mod+Left resize shrink width 5 px or 5 ppt
bindsym Control+$mod+Right resize grow width 5 px or 5 ppt
bindsym Control+$mod+Up resize grow height 5 px or 5 ppt
bindsym Control+$mod+Down resize shrink height 5 px or 5 ppt

# swap container with containers next to it
bindsym $mod+Shift+Left mark --add "swapee"; focus left; swap container with mark "swapee"; focus left; unmark "swapee"
bindsym $mod+Shift+Right mark --add "swapee"; focus right; swap container with mark "swapee"; focus right; unmark "swapee"
bindsym $mod+Shift+Up mark --add "swapee"; focus up; swap container with mark "swapee"; focus up; unmark "swapee"
bindsym $mod+Shift+Down mark --add "swapee"; focus down; swap container with mark "swapee"; focus down; unmark "swapee"

# scratchpad
# Move the currently focused window to the scratchpad
bindsym $mod+Shift+minus move scratchpad
# Move currently focused scratchpad out of scratchpad
bindsym Control+Shift+minus floating toggle
bindsym $mod+Escape [class="Gnome-terminal"] scratchpad show
#bindsym Mod1+grave [class="Gnome-terminal"] scratchpad show
#bindsym $mod+grave [class="firefox"] scratchpad show
bindsym Mod1+1 [class="obsidian"] scratchpad show
bindsym Mod1+2 [class="VSCodium"] scratchpad show
bindsym Mod1+3 [class="firefox"] scratchpad show
bindsym $mod+grave [class="Chromium-browser"] scratchpad show
bindsym $mod+Tab [class="Teleguard_desktop"] scratchpad show

# switch layouts
bindsym $mod+t layout toggle tabbed splith floating
bindsym $mod+f fullscreen toggle
bindsym $mod+Up fullscreen toggle
bindsym $mod+Control+minus floating toggle

# switch workspaces
#bindsym $mod+Tab workspace prev

# change workspace name
bindsym Mod1+n exec i3-input -F 'rename workspace to "%s"' -P 'New name: '

# switch to prev/ next window in same workspace
bindsym $mod+Left focus left 
bindsym $mod+Right focus right

# switch to workspace - using regular num keys
bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8
bindsym $mod+9 workspace $ws9
bindsym $mod+0 workspace $ws0

# move window to a specific workspace
bindsym $mod+Shift+1 move container to workspace $ws1; workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2; workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3; workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4; workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5; workspace $ws5
bindsym $mod+Shift+6 move container to workspace $ws6; workspace $ws6
bindsym $mod+Shift+7 move container to workspace $ws7; workspace $ws7
bindsym $mod+Shift+8 move container to workspace $ws8; workspace $ws8
bindsym $mod+Shift+9 move container to workspace $ws9; workspace $ws9
bindsym $mod+Shift+0 move container to workspace $ws0; workspace $ws0

# clipboard
bindsym $mod+c exec --no-startup-id rofi -modi "clipboard:greenclip print" -show clipboard \
		-config ~/.config/rofi/rofidmenu.rasi

# brightness
bindsym $mod+F5 exec --no-startup-id ~/.config/i3/scripts/brightness.sh - eDP-1 0.05
bindsym $mod+F6 exec --no-startup-id ~/.config/i3/scripts/brightness.sh + eDP-1 0.05

# screenshots
bindsym Shift+Print exec --no-startup-id "maim -s $HOME/Pictures/screenshot_$(date '+%Y-%m-%d_%H%M%S.png')"
bindsym Print exec --no-startup-id "maim -s -u | xclip -selection clipboard -t image/png"
bindsym $mod+s exec --no-startup-id "maim -s -u | xclip -selection clipboard -t image/png"

# audio
bindsym $mod+a exec pactl set-default-sink $(pactl list short sinks |awk '{print $2}' |rofi $rofi_args -dmenu)

bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -5% && $refresh_i3status
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +5% && $refresh_i3status
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle && $refresh_i3status
bindsym $mod+comma exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -5% && $refresh_i3status
bindsym $mod+period exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +5% && $refresh_i3status
bindsym $mod+m exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle && $refresh_i3status

bindsym Control+$mod+period exec --no-startup-id pactl set-source-volume @DEFAULT_SOURCE@ +5% && $refresh_i3status
bindsym Control+$mod+comma exec --no-startup-id pactl set-source-volume @DEFAULT_SOURCE@ -5% && $refresh_i3status
bindsym Control+$mod+m exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle && $refresh_i3status

bindsym XF86AudioPlay exec --no-startup-id playerctl play-pause


# i3
bindsym $mod+Shift+r restart
bindsym $mod+Shift+c reload
bindsym $mod+Shift+e exit

# power
bindsym Control+Mod1+p exec --no-startup-id poweroff

# lock by blurring the screen:
bindsym $mod+l exec ~/.config/i3/scripts/blur-lock

# brightness
bindsym XF86MonBrightnessUp exec --no-startup-id brightnessctl set +10%
bindsym XF86MonBrightnessDown exec --no-startup-id brightnessctl set 10%-

# read 1 character and mark the current window with this character
bindsym Control+$mod+g exec i3-input -F 'mark %s' -l 1 -P 'Mark: '
# read 1 character and go to the window with the character
bindsym $mod+g exec i3-input -F '[con_mark="%s"] focus' -l 1 -P 'Goto: '

# wifi
bindsym $mod+w exec --no-startup-id $HOME/.config/i3/scripts/rofi-wifi-menu.sh

# set keyboard layout
bindsym Control+Mod1+g exec setxkbmap -layout gb
bindsym Control+Mod1+u exec setxkbmap -layout us

# polybar
#bindsym $mod+Up exec --no-startup-id polybar-msg action date module_toggle && polybar-msg action pomodoro module_toggle
bindsym $mod+Down exec --no-startup-id polybar-msg cmd toggle 


####################
### keybindings_end ###
####################



###################
### statusbar_start ###
###################


